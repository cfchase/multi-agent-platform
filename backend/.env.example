# ========================================
# Backend Configuration
# ========================================
# This is the source of truth for all server-side configuration.
# Copy to backend/.env and fill in your values.

# API Configuration
API_V1_STR=/api/v1
PROJECT_NAME="Multi-Agent Platform"
PORT=8000

# Environment
# - "local": Bypasses OAuth with dev-user (default for local development)
# - "development": Requires real OAuth (configure OAUTH_CLIENT_ID/SECRET below)
ENVIRONMENT=local

# Frontend Configuration
FRONTEND_HOST=http://localhost:4180

# CORS Configuration (comma-separated list)
BACKEND_CORS_ORIGINS=http://localhost:4180,http://localhost:8080,http://localhost:5173

# Security
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=changethis_generate_a_secure_random_key

# ========================================
# Database Configuration
# ========================================
# For local development, use values that match scripts/dev-db.sh
POSTGRES_SERVER=localhost
POSTGRES_PORT=5432
POSTGRES_USER=app
POSTGRES_PASSWORD=changethis
POSTGRES_DB=app

# ========================================
# OAuth Configuration (Required for ENVIRONMENT=development)
# ========================================
# For Google OAuth (default if OAUTH_ISSUER_URL not set):
#   1. Create credentials at: https://console.cloud.google.com/apis/credentials
#   2. Add redirect URI: http://localhost:4180/oauth2/callback
#
# For OIDC providers (Keycloak, Okta, etc.):
#   Set OAUTH_ISSUER_URL to your provider's issuer URL

# OAUTH_CLIENT_ID=your-client-id
# OAUTH_CLIENT_SECRET=your-client-secret
# OAUTH_ISSUER_URL=https://your-keycloak/realms/your-realm  # Optional: enables OIDC mode

# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
OAUTH_COOKIE_SECRET=changethis_generate_a_secure_random_key

# ========================================
# Langflow Configuration
# ========================================
# Chat feature uses Langflow for AI responses.
#
# Mock Mode (for testing without Langflow):
#   LANGFLOW_URL=mock
#
# Self-hosted Langflow:
#   LANGFLOW_URL=http://localhost:7860
#   LANGFLOW_DEFAULT_FLOW=My Chat Flow  # Preferred (stable across imports)
#
# Langflow Cloud:
#   LANGFLOW_URL=https://api.langflow.astra.datastax.com
#   LANGFLOW_ID=your-project-id
#   LANGFLOW_DEFAULT_FLOW=My Chat Flow
#   LANGFLOW_API_KEY=your-api-key

# Default: mock mode (simulated responses for testing)
LANGFLOW_URL=mock

# For real Langflow, uncomment and configure:
# LANGFLOW_URL=http://localhost:7860
# LANGFLOW_DEFAULT_FLOW=My Chat Flow  # Preferred: stable across imports
# LANGFLOW_API_KEY=                   # Optional for self-hosted
# LANGFLOW_ID=                        # Required for Langflow Cloud

# ========================================
# External Service Integrations (OAuth)
# ========================================
# Users can connect external services to enable AI flows to access their data.
# Tokens are encrypted before storage in the database.

# Token encryption key for storing OAuth tokens securely.
# REQUIRED for external integrations to work.
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
TOKEN_ENCRYPTION_KEY=changethis_generate_a_fernet_key

# ----------------------------------------
# Google Drive OAuth
# ----------------------------------------
# Allows users to connect their Google Drive for document access.
# Setup:
#   1. Create project at: https://console.cloud.google.com/
#   2. Enable Google Drive API
#   3. Create OAuth 2.0 credentials (Web application)
#   4. Add redirect URI: http://localhost:8000/api/v1/integrations/oauth/callback/google_drive
#   5. Copy Client ID and Secret below
# GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
# GOOGLE_CLIENT_SECRET=your-google-client-secret

# ----------------------------------------
# Dataverse OAuth (Dynamic Client Registration)
# ----------------------------------------
# Allows users to connect to Dataverse/Snowflake for data analytics.
# Uses RFC 7591 dynamic client registration - no client credentials needed.
# Only the OAuth server URL is required.
# Endpoints: {auth_url}/authorize, {auth_url}/token, {auth_url}/register
# DATAVERSE_AUTH_URL=https://mcp.dataverse.redhat.com/auth
